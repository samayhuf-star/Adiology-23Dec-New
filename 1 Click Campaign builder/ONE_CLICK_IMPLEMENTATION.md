# üöÄ ONE-CLICK CAMPAIGN IMPLEMENTATION GUIDE

## Overview

The 1-Click Campaign Builder allows users to:
1. ‚úÖ Paste landing page URL
2. ‚úÖ AI analyzes website content
3. ‚úÖ Auto-generates complete campaign with:
   - 100+ keywords
   - Multiple ad groups
   - 5+ ad copy variations
   - Negative keywords
   - Google Ads CSV export
4. ‚úÖ Shows real-time progress window
5. ‚úÖ Saves to "Saved Campaigns" automatically
6. ‚úÖ Download CSV for Google Ads Editor

---

## üìÅ Files Created

1. **one-click-campaign-engine.js** - AI generation logic
2. **OneClickCampaignComponent.jsx** - React UI component
3. **one-click-campaign-routes.js** - Backend API routes

---

## üîß IMPLEMENTATION STEPS

### Step 1: Add Files to Your Project

```bash
# Backend
cp one-click-campaign-engine.js ~/workspace/services/
cp one-click-campaign-routes.js ~/workspace/routes/

# Frontend
cp OneClickCampaignComponent.jsx ~/workspace/src/components/
```

### Step 2: Update Backend server.js

Add these imports:

```javascript
import oneClickRoutes from './routes/one-click-campaign-routes.js';
```

Add this line after other routes:

```javascript
app.use('/api/campaigns', oneClickRoutes);
```

Your server.js should look like:

```javascript
import express from 'express';
import cors from 'cors';
import dotenv from 'dotenv';

import campaignRoutes from './routes/campaigns.js';
import keywordRoutes from './routes/keywords.js';
import oneClickRoutes from './routes/one-click-campaign-routes.js';

dotenv.config();

const app = express();
const PORT = process.env.PORT || 3001;

app.use(cors());
app.use(express.json());
app.use(express.urlencoded({ extended: true }));

// Routes
app.use('/api/campaigns', campaignRoutes);
app.use('/api/campaigns', oneClickRoutes);  // ‚Üê Add this
app.use('/api/keywords', keywordRoutes);

// ... rest of server.js
```

### Step 3: Install Dependencies (if needed)

```bash
npm install @anthropic-ai/sdk axios
```

Already installed? Skip this.

### Step 4: Update Frontend Router

In your main router/App.jsx, add:

```javascript
import OneClickCampaignBuilder from './components/OneClickCampaignComponent';

// In your routes:
<Route path="/campaign/one-click" element={<OneClickCampaignBuilder />} />
```

### Step 5: Update Main Menu

Add button to main menu:

```jsx
<button 
  onClick={() => navigate('/campaign/one-click')}
  className="... your button styles ..."
>
  <Zap className="w-5 h-5" />
  1-Click Campaign
</button>
```

### Step 6: Update Campaign List (Optional)

Add to show "Generated by 1-Click" label:

```javascript
// In campaign card
{campaign.created_from === 'one_click' && (
  <span className="badge">Generated by 1-Click</span>
)}
```

---

## üß™ TESTING

### Test Backend Endpoint

```bash
curl -X POST http://localhost:3001/api/campaigns/one-click \
  -H "Content-Type: application/json" \
  -d '{
    "websiteUrl": "https://example.com",
    "userId": "test-user-123"
  }'
```

Expected response:

```json
{
  "success": true,
  "campaign": {
    "id": "...",
    "campaign_name": "...",
    "status": "draft"
  },
  "csvData": "Campaign,Ad Group,..."
}
```

### Test Frontend

1. Go to: `http://localhost:3000/campaign/one-click`
2. Enter a website URL: `https://example.com`
3. Click "Generate Campaign"
4. Watch progress window
5. See results
6. Download CSV or Save campaign

---

## üéØ HOW IT WORKS (Step by Step)

### 1. User Input (Input Step)
- User pastes landing page URL
- Default settings shown (USA, Mobile+Desktop, Search, English)

### 2. Generation (Generating Step)
Shows 7-step progress:
1. **Analyzing landing page** (15%)
   - Fetches website HTML
   - Extracts content, title, metadata
   - Claude analyzes business info

2. **Building campaign structure** (30%)
   - Claude generates campaign settings
   - Decides budget, ad groups, themes

3. **Generating 100+ keywords** (50%)
   - Claude generates seed keywords
   - Generates long-tail keywords
   - Identifies negative keywords
   - Total: 100+ keywords

4. **Creating ad copy variations** (65%)
   - 5+ headlines (max 30 chars)
   - 3+ descriptions (max 90 chars)
   - Sitelinks and callouts
   - Tested copy patterns

5. **Organizing ad groups** (80%)
   - Groups keywords by theme
   - Creates 5 ad groups
   - Assigns ads to each group

6. **Generating Google Ads CSV** (90%)
   - Creates valid CSV format
   - Includes campaigns, ad groups, ads, keywords
   - Ready for Google Ads Editor import

7. **Saving campaign** (95-100%)
   - Saves to Supabase adiology_campaigns table
   - Stores all data in campaign_data JSONB field
   - Marks as "draft" status

### 3. Results (Results Step)
Shows:
- ‚úÖ Campaign summary
- üìä Website analysis
- üéØ Campaign structure
- üîë Generated keywords
- üöÄ Ad copy variations
- Download CSV button
- Save to Saved Campaigns button

---

## üìä DATABASE SCHEMA

Campaign saved with this structure:

```json
{
  "id": "uuid",
  "user_id": "uuid",
  "campaign_name": "1-Click Campaign - adiology.io",
  "business_name": "Adiology",
  "website_url": "https://adiology.io",
  "business_type": "SaaS",
  "target_audience": "Digital Marketers",
  "monthly_budget": 2000,
  "daily_budget": 100,
  "status": "draft",
  "seed_keywords": ["keyword1", "keyword2", ...],
  "campaign_data": {
    "analysis": {
      "businessName": "...",
      "mainValue": "...",
      "keyBenefits": [...],
      "targetAudience": "...",
      "industry": "...",
      "products": [...],
      "cta": "...",
      "keyFeatures": [...]
    },
    "structure": {
      "campaignName": "...",
      "budget": 2000,
      "adGroupThemes": [...]
    },
    "adGroups": [
      {
        "name": "Core Product",
        "keywords": [...],
        "ads": [...]
      }
    ],
    "adCopy": {
      "headlines": [...],
      "descriptions": [...],
      "sitelinks": [...]
    },
    "csvData": "Campaign,Ad Group,..."
  },
  "created_at": "2025-12-13...",
  "updated_at": "2025-12-13..."
}
```

---

## üîí SECURITY CONSIDERATIONS

1. **Validate URL**: Must start with http:// or https://
2. **Timeout**: 10-second timeout on website fetch
3. **User ID**: Always verify user owns the campaign
4. **Rate Limit**: Consider limiting API calls per user/day
5. **Error Handling**: Don't expose internal errors to user

---

## ‚ö° PERFORMANCE TIPS

1. **Caching**: Cache website analysis for same URL
2. **Queue**: For high traffic, use job queue for generation
3. **Streaming**: Use SSE (Server-Sent Events) for progress
4. **Compression**: Gzip CSV before download
5. **Database**: Index user_id for faster queries

---

## üêõ TROUBLESHOOTING

### Error: "Failed to analyze website"
- Website might be blocked or require authentication
- Try a public website first
- Check URL format (https://...)

### Error: "ANTHROPIC_API_KEY is undefined"
- Add to .env file
- Restart server

### CSV not downloading
- Check browser console for errors
- Verify campaign has csvData field
- Check file size (should be < 10MB)

### Slow generation
- Website analysis takes 30+ seconds
- Multiple AI calls slow process down
- Consider caching results

---

## üéØ NEXT ENHANCEMENTS

1. **Add More Options**
   - Budget selector
   - Campaign type selector
   - Target location selector

2. **Edit Before Save**
   - Edit keywords before saving
   - Modify ad copy
   - Adjust budget

3. **Templates**
   - Save campaign as template
   - Reuse for similar businesses

4. **Bulk Generation**
   - Generate multiple campaigns from URL list
   - Batch CSV export

5. **Analytics**
   - Track generation stats
   - Show which campaigns perform best
   - Recommend optimizations

---

## üìû API ENDPOINTS

### POST /api/campaigns/one-click
Generate campaign and save immediately

**Request:**
```json
{
  "websiteUrl": "https://example.com",
  "userId": "user-123"
}
```

**Response:**
```json
{
  "success": true,
  "campaign": {...},
  "csvData": "Campaign,Ad Group,..."
}
```

### GET /api/campaigns/one-click-stream
Server-Sent Events for real-time progress

**Request:**
```
GET /api/campaigns/one-click-stream?url=https://example.com&userId=user-123
```

**Response (Streamed):**
```
data: {"step": 1, "progress": 15, "status": "Analyzing..."}
data: {"step": 2, "progress": 30, "status": "Building structure..."}
...
```

### POST /api/campaigns/save-from-oneclick
Save a campaign to Saved Campaigns

**Request:**
```json
{
  "campaignData": {...},
  "userId": "user-123"
}
```

**Response:**
```json
{
  "success": true,
  "message": "Campaign saved",
  "data": {...}
}
```

### GET /api/campaigns/download-csv/:campaignId
Download CSV for a campaign

**Response:**
CSV file download

---

## ‚úÖ VERIFICATION CHECKLIST

- [ ] Files copied to project
- [ ] server.js updated with routes
- [ ] Frontend router updated
- [ ] Main menu button added
- [ ] Dependencies installed
- [ ] Backend .env has ANTHROPIC_API_KEY
- [ ] Frontend .env.local updated
- [ ] Backend running (npm start)
- [ ] Test endpoint works
- [ ] Frontend test page loads
- [ ] Can generate campaign
- [ ] Can download CSV
- [ ] Can save campaign
- [ ] Campaign appears in saved list

---

## üöÄ YOU'RE READY!

Once all steps are complete:
1. User clicks "1-Click Campaign"
2. Pastes landing page URL
3. Watches AI generate complete campaign
4. Downloads CSV or saves
5. Campaign saved automatically to Saved Campaigns

**That's it! Full automation! üéâ**

---

## üìä Expected Results

For a typical landing page:

```
Website: https://example.com
Campaign: "1-Click Campaign - example.com"

Generated:
‚úÖ Keywords: 125
‚úÖ Ad Groups: 5
‚úÖ Headlines: 8
‚úÖ Descriptions: 4
‚úÖ Negative Keywords: 18
‚úÖ CSV Rows: 130+

Time: 2-3 minutes
Status: Draft (ready to launch)
```

Ready to implement? Start with Step 1! üöÄ
